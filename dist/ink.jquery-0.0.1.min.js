/**
 * INK.js
 * Version: 0.0.1
 * Source : https://github.com/yoshihitofujiwara/INKjs
 * Author : Yoshihito Fujiwara
 * Copyright (c) 2012 Yoshihito Fujiwara
 *
 * Released under the MIT license
 * http://opensource.org/licenses/mit-license.php
 */
!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=31)}({31:function(e,t,n){n(32),n(33),n(34),n(35),n(36)},32:function(e,t){var r,n,f;r=jQuery,(f={}).isTouch=((n=document.createElement("div")).setAttribute("ontouchstart","return"),"function"==typeof n.ontouchstart),f.EVENTS={flick:"flick",flickX:"flickX",flickY:"flickY",flickmove:"flickmove",flickmoveX:"flickmoveX",flickmoveY:"flickmoveY",flickcancel:"flickcancel",flickcancelX:"flickcancelX",flickcancelY:"flickcancelY"},f.OPTIONS={hit:50,area:10},f.createEventData=function(e){return{flickEvent:null,isMoveX:!1,isMoveY:!1,moveX:0,moveY:0,startX:f.isTouch?e.originalEvent.changedTouches[0].pageX:e.pageX,startY:f.isTouch?e.originalEvent.changedTouches[0].pageY:e.pageY,startTime:r.now(),endTime:null}},f.getFlickHasMap=function(e){return{isSide:e===f.EVENTS.flick||e===f.EVENTS.flickX||e===f.EVENTS.flickmove||e===f.EVENTS.flickmoveX||e===f.EVENTS.flickcancel||e===f.EVENTS.flickcancelX,isUpdown:e===f.EVENTS.flick||e===f.EVENTS.flickY||e===f.EVENTS.flickmove||e===f.EVENTS.flickmoveX||e===f.EVENTS.flickcancel||e===f.EVENTS.flickcancelY}},f.setMoveData=function(e,t,n){t.flickEvent=r.extend({},t,e),f.isTouch?(t.moveX=e.originalEvent.changedTouches[0].pageX-t.startX,t.moveY=t.startY-e.originalEvent.changedTouches[0].pageY):(t.moveX=e.pageX-t.startX,t.moveY=t.startY-e.pageY),n.area<Math.abs(t.moveY)&&(t.isMoveY=!0),n.area<Math.abs(t.moveX)&&(t.isMoveX=!0)},f.getSetup=function(o){var e="._"+o.toUpperCase();return function(n){var i=r(this);i.on("mousedown"+e+" touchstart"+e,function(e){var t=r.extend({},f.OPTIONS,n);f[o].handler(i,e,t)})}},f.getTeardown=function(e){var t="._"+e.toUpperCase();return function(){r(this).off("mousedown"+t+" touchstart"+t,f[e].handler)}},f.getFlickHandler=function(c){var a="._"+c.toUpperCase(),l=f.getFlickHasMap(c);return function(n,e,i){var o=f.createEventData(e);f.isTouch||e.preventDefault(),n.off("mousemove"+a+" touchmove"+a+" click"+a).on("mousemove"+a+" touchmove"+a,function(e){f.isTouch||e.preventDefault(),f.setMoveData(e,o,i),("flickX"===c&&o.isMoveY&&!o.isMoveX||"flickY"===c&&o.isMoveX&&!o.isMoveY)&&n.off("mousemove"+a+" touchmove"+a+" click"+a)}).on("click"+a,function(e){var t=o.isMoveX&&i.area<Math.abs(o.moveX)&&l.isSide,n=o.isMoveY&&i.area<Math.abs(o.moveY)&&l.isUpdown;(l.isSide&&t||l.isUpdown&&n)&&e.preventDefault()}),n.find("a").off("click"+a).on("click"+a,function(e){if(l.isSide&&o.isMoveX||l.isUpdown&&o.isMoveY)return!1}),r("html").off("mouseup"+a+" touchend"+a).one("mouseup"+a+" touchend"+a,function(){if(n.off("mousemove"+a+" touchmove"+a+" click"+a),o&&o.flickEvent){o.flickEvent.type=c,o.flickEvent.moveX=o.moveX,o.flickEvent.moveY=o.moveY,o.flickEvent.endTime=r.now();var e=o.isMoveX&&i.hit<Math.abs(o.moveX)&&l.isSide,t=o.isMoveY&&i.hit<Math.abs(o.moveY)&&l.isUpdown;(l.isSide&&e||l.isUpdown&&t)&&n.trigger(o.flickEvent)}setTimeout(function(){o=null},20)})}},f.getMoveHandler=function(n){var c="._"+n.toUpperCase(),a=f.getFlickHasMap(n);return function(t,e,i){var o=f.createEventData(e);f.isTouch||e.preventDefault(),t.off("mousemove"+c+" touchmove"+c+" click"+c).on("mousemove"+c+" touchmove"+c,function(e){f.setMoveData(e,o,i),f.isTouch||e.preventDefault(),"flickmove"===n?(o.isMoveX||o.isMoveY)&&(e.preventDefault(),o.flickEvent.type=n,o.flickEvent.moveX=o.moveX,o.flickEvent.moveY=o.moveY,o.flickEvent.endTime=r.now(),t.trigger(o.flickEvent)):"flickmoveX"===n?o.isMoveY&&!o.isMoveX?t.off("mousemove"+c+" touchmove"+c+" click"+c):o.isMoveX&&(e.preventDefault(),o.flickEvent.type=n,o.flickEvent.moveX=o.moveX,o.flickEvent.moveY=o.moveY,o.flickEvent.endTime=r.now(),t.trigger(o.flickEvent)):"flickmoveY"===n&&(o.isMoveX&&!o.isMoveY?t.off("mousemove"+c+" touchmove"+c+" click"+c):o.isMoveY&&(e.preventDefault(),o.flickEvent.type=n,o.flickEvent.moveX=o.moveX,o.flickEvent.moveY=o.moveY,o.flickEvent.endTime=r.now(),t.trigger(o.flickEvent)))}).on("click"+c,function(e){a.isSide&&o.isMoveX&&i.area<Math.abs(o.moveX)&&e.preventDefault()}),t.find("a").off("click"+c).on("click"+c,function(e){var t=o.isMoveX&&i.area<Math.abs(o.moveX)&&a.isSide,n=o.isMoveY&&i.area<Math.abs(o.moveY)&&a.isUpdown;if(a.isSide&&t||a.isUpdown&&n)return!1}),r("html").off("mouseup"+c+" touchend"+c).on("mouseup"+c+" touchend"+c,function(){t.off("mousemove"+c+" touchmove"+c+" click"+c),setTimeout(function(){o=null},20)})}},f.getCancelHandler=function(c){var a="._"+c.toUpperCase(),l=f.getFlickHasMap(c);return function(n,e,i){var o=f.createEventData(e);f.isTouch||e.preventDefault(),n.off("mousemove"+a+" touchmove"+a+" click"+a).on("mousemove"+a+" touchmove"+a,function(e){f.isTouch||e.preventDefault(),f.setMoveData(e,o,i),("flickcancelX"===c&&o.isMoveY&&!o.isMoveX||"flickcancelY"===c&&o.isMoveX&&!o.isMoveY)&&n.off("mousemove"+a+" touchmove"+a+" click"+a)}).on("click"+a,function(e){var t=o.isMoveX&&i.area<Math.abs(o.moveX)&&l.isSide,n=o.isMoveY&&i.area<Math.abs(o.moveY)&&l.isUpdown;(l.isSide&&t||l.isUpdown&&n)&&e.preventDefault()}),n.find("a").off("click"+a).on("click"+a,function(e){if(o.isMoveX&&i.area<Math.abs(o.moveX)&&l.isSide,o.isMoveY&&i.area<Math.abs(o.moveY)&&l.isUpdown,l.isSide&&o.isMoveX||l.isUpdown&&o.isMoveY)return!1}),r("html").off("mouseup"+a+" touchend"+a).one("mouseup"+a+" touchend"+a,function(){if(n.off("mousemove"+a+" touchmove"+a+" click"+a),o&&o.flickEvent){var e=i.hit>Math.abs(o.moveX)&&l.isSide,t=i.hit>Math.abs(o.moveY)&&l.isUpdown;o.flickEvent.type=c,o.flickEvent.moveX=o.moveX,o.flickEvent.moveY=o.moveY,o.flickEvent.endTime=r.now(),(l.isSide&&o.isMoveX||l.isUpdown&&o.isMoveY)&&(c===f.EVENTS.flickcancel&&e&&t?n.trigger(o.flickEvent):c===f.EVENTS.flickcancelX&&o.isMoveX&&e?n.trigger(o.flickEvent):c===f.EVENTS.flickcancelY&&o.isMoveY&&t&&n.trigger(o.flickEvent))}setTimeout(function(){o=null},20)})}},f.flick={setup:f.getSetup(f.EVENTS.flick),teardown:f.getTeardown(f.EVENTS.flick),handler:f.getFlickHandler(f.EVENTS.flick)},f.flickX={setup:f.getSetup(f.EVENTS.flickX),teardown:f.getTeardown(f.EVENTS.flickX),handler:f.getFlickHandler(f.EVENTS.flickX)},f.flickY={setup:f.getSetup(f.EVENTS.flickY),teardown:f.getTeardown(f.EVENTS.flickY),handler:f.getFlickHandler(f.EVENTS.flickY)},f.flickmove={setup:f.getSetup(f.EVENTS.flickmove),teardown:f.getTeardown(f.EVENTS.flickmove),handler:f.getMoveHandler(f.EVENTS.flickmove)},f.flickmoveX={setup:f.getSetup(f.EVENTS.flickmoveX),teardown:f.getTeardown(f.EVENTS.flickmoveX),handler:f.getMoveHandler(f.EVENTS.flickmoveX)},f.flickmoveY={setup:f.getSetup(f.EVENTS.flickmoveY),teardown:f.getTeardown(f.EVENTS.flickmoveY),handler:f.getMoveHandler(f.EVENTS.flickmoveY)},f.flickcancel={setup:f.getSetup(f.EVENTS.flickcancel),teardown:f.getTeardown(f.EVENTS.flickcancel),handler:f.getCancelHandler(f.EVENTS.flickcancel)},f.flickcancelX={setup:f.getSetup(f.EVENTS.flickcancelX),teardown:f.getTeardown(f.EVENTS.flickcancelX),handler:f.getCancelHandler(f.EVENTS.flickcancelX)},f.flickcancelY={setup:f.getSetup(f.EVENTS.flickcancelY),teardown:f.getTeardown(f.EVENTS.flickcancelY),handler:f.getCancelHandler(f.EVENTS.flickcancelY)},r.Flick=f,r.each(f.EVENTS,function(e,n){r.event.special[n]=f[n],r.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}})},33:function(e,t){var u;(u=jQuery).each({mouseenter:"slipin",mouseleave:"slipout"},function(e,f){u.event.special[f]={setup:function(){u(this).on(e,u.event.special[f].handler)},teardown:function(){u(this).off(e,u.event.special[f].handler)},handler:function(e){var t={},n=u(this),i=n.offset(),o=n.width(),c=n.height(),a=(e.pageX-i.left-o/2)*(c<o?c/o:1),l=(e.pageY-i.top-c/2)*(o<c?o/c:1),r=Math.round((Math.atan2(l,a)*(180/Math.PI)+180)/90+3)%4;switch(t.originalEvent=e,t.x=a,t.y=l,t.type=f,r){case 0:t.direction="top";break;case 1:t.direction="right";break;case 2:t.direction="bottom";break;case 3:t.direction="left"}n.trigger(t)}},u.fn[f]=function(e,t){return 0<arguments.length?this.on(f,null,e,t):this.trigger(f)}}),u.fn.slip=function(e,t){return this.slipin(e).slipout(t||e)}},34:function(e,t){var o;(o=jQuery).each({resize:"resizestop",scroll:"scrollstop"},function(n,i){o.event.special[i]={data:{eventType:i,timer:50,timerId:null},setup:function(e){var t=o.extend({},o.event.special[i].data,e);o(this).on(n,function(){o.event.special[i].handler(t)})},teardown:function(){o(this).off(n)},handler:function(e){clearTimeout(e.timerId),e.timerId=setTimeout(function(){o(this).trigger(e.eventType)},e.timer)}},o.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}})},35:function(e,t){var r,o;r=jQuery,o=Array.prototype.slice,r.sequence=function(){var e,t,n=new r.Deferred,i=new r.Deferred;(e=r.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments))[e.length]=n.resolve;for(var o=0,c=e.length;o<c;o+=1)r.isFunction(e[o])&&(t=(t||i).pipe(r.proxy(function(){return this()},e[o])).fail(n.reject));return i.resolve(),n.promise()},r.stream=function(){var t=new r.Deferred,n=0,i=r.isArray(arguments[0])?i:o.call(arguments);return i.push(t.resolve),function e(){r.when.call(null,i[n].apply(null,arguments)).fail(t.reject).done(function(){t.notify.call(null,arguments),(n+=1)<i.length&&e.apply(null,arguments)})}(),t.promise()},r.timer=function(n,i){var o=r.Deferred(),c=performance.now(),a=!1;i=i||r.noop,function e(){var t=performance.now()-c;a&&n<t?(o.resolve(1),i()):(n<t&&(t=n,a=!0),o.notify(t/n,t),requestAnimationFrame(e))}();var l=o.promise();return r.each(o,function(e,t){l[e]||(l[e]=t)}),l}},36:function(e,t){var c;(c=jQuery).fn.addQ=function(e,t,n){var i=this,o=[].slice.call(arguments,1);return c.isFunction(e)?this.queue(function(){return e.apply(i,o),i.dequeue()}):this.queue(function(){return i[e].apply(i,o).dequeue()})},c.fn.replaceAttr=function(e,t,n){var i=this.attr(e);return i?(n=n||"",this.attr(e,i.replace(t,n))):this},c.fn.getExt=function(e,t){var n,i=this.attr(e);return-1<i.indexOf(".")&&(n=i.substring(i.lastIndexOf(".")),t||(n=n.split("?")[0].split("#")[0])),n}}});